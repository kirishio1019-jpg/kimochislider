# Pending（仮）

未確定の参加気持ちを置くイベント告知アプリ

## 概要

参加者に「参加確定」を求めず、代わりに直感的なスライダーで「今の気持ち（参加予定度）」を安全に入力できるイベント告知アプリです。入力を起点に「未完了感」と「関与継続」を作り、前日/当日行動へ繋げることを目的としています。

**メッセージアプリやSNSで直接スライダーを操作できる埋め込み版も提供しています。**

## 主な機能

### 1. 通常版（`/e/[slug]`）
- イベント情報の詳細表示
- スライダーで参加気持ちを入力
- 更新用リンクの発行
- メール登録（リマインド用）

### 2. 埋め込み版（`/embed/[slug]`）✨NEW
- LINEやFacebookのメッセージ内で開ける軽量版
- メッセージアプリ内で直接スライダーを操作可能
- コンパクトなUIで素早く気持ちを入力
- 通常版と同じデータベースに保存

### 3. イベント作成（`/admin/new`）
- イベント情報を入力
- 作成後、通常版URLと埋め込み版URLを発行
- 認証不要（admin_tokenで管理）

### 4. ダッシュボード（`/admin/[admin_token]/events/[event_id]`）
- 回答人数、平均スコア、カテゴリ分布を表示
- 最新回答一覧
- CSVエクスポート
- リマインド対象抽出

## 使い方

### イベント主催者向け

1. **イベントを作成**
   - `/admin/new` にアクセス
   - イベント情報を入力して作成

2. **URLを取得**
   - **通常版URL**: ウェブサイトやメールで共有
   - **埋め込み版URL**: LINEやFacebookのメッセージで共有

3. **メッセージアプリで共有する場合**
   ```
   【イベント告知】
   
   タイトル: [イベント名]
   日時: [日時]
   
   参加したい気持ちを教えてください
   [埋め込み版URLを貼り付け]
   ```

4. **ダッシュボードで確認**
   - 管理URLからアクセス
   - 回答状況や気持ちの分布を確認

### 参加者向け

1. **LINEやFacebookでURLを開く**
   - メッセージ内のリンクをタップ
   - 埋め込み版ページが開きます

2. **スライダーで気持ちを入力**
   - 「まだ迷う」から「けっこう行きたい」まで
   - 数値は表示されず、カテゴリで表示

3. **送信**
   - 「気持ちを置いておく」ボタンをタップ
   - 保存完了のメッセージが表示されます

## 技術スタック

- **Next.js 16** (App Router)
- **TypeScript**
- **Tailwind CSS v4**
- **Supabase** (PostgreSQL + Row Level Security)
- **date-fns** (日付フォーマット)

## セットアップ

詳細は `SETUP.md` を参照してください。

1. 依存関係のインストール: `npm install`
2. Supabaseのセットアップ: `supabase-schema.sql` を実行
3. 環境変数の設定: `.env.local` を作成
4. 開発サーバーの起動: `npm run dev`

## プロジェクト構造

```
pending/
├── app/
│   ├── e/[slug]/              # 通常版イベントページ
│   ├── embed/[slug]/          # 埋め込み版（LINE/Facebook用）
│   ├── r/[edit_token]/        # 参加予定度更新ページ
│   ├── admin/
│   │   ├── new/               # イベント作成ページ
│   │   └── [admin_token]/events/[event_id]/  # ダッシュボード
│   └── api/
│       ├── events/            # イベントAPI
│       └── responses/         # 回答API
├── components/
│   ├── ui/                    # UIコンポーネント
│   └── feeling-slider.tsx    # スライダーコンポーネント
├── lib/
│   ├── supabase/             # Supabaseクライアント
│   └── utils.ts              # ユーティリティ関数
├── types/
│   └── index.ts              # TypeScript型定義
└── supabase-schema.sql       # データベーススキーマ
```

## UI/UXの特徴

1. **判断不要**: 連続スライダー、数値/％は表示しない
2. **安全**: 他人に見えない、匿名OK
3. **感情表現**: 両端ラベルは感情語（「まだ迷う」「けっこう行きたい」）
4. **後戻り可能**: いつでも更新可能
5. **人の気配**: 回答人数の薄い提示
6. **共感**: 迷ってる人も多い等の文言
7. **メッセージアプリ対応**: メッセージアプリやSNS内で直接操作可能

## デプロイ

アプリケーションを公開するには、`DEPLOY.md`を参照してください。

**クイックスタート（Vercel）:**

1. GitHubにリポジトリをプッシュ
2. [Vercel](https://vercel.com)でプロジェクトをインポート
3. 環境変数を設定（`.env.example`を参照）
4. 自動デプロイが開始されます

詳細な手順は`DEPLOY.md`を参照してください。

## ライセンス

このプロジェクトはMVP実装です。
